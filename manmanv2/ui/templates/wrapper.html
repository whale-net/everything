<nav>
    <div class="container">
        <div class="logo">ManManV2</div>
        <ul>
            <li><a href="/" class="{{if eq .Active "home"}}active{{end}}">Dashboard</a></li>
            <li><a href="/servers" class="{{if eq .Active "servers"}}active{{end}}">Servers</a></li>
            <li><a href="/games" class="{{if eq .Active "games"}}active{{end}}">Games</a></li>
            <li><a href="/sessions" class="{{if eq .Active "sessions"}}active{{end}}">Sessions</a></li>
            <li><a href="/workshop/library" class="{{if eq .Active "workshop"}}active{{end}}">Workshop</a></li>
            {{if .User}}
            <li><a href="/auth/logout">Logout ({{.User.Name}})</a></li>
            {{end}}
        </ul>
        {{if .Servers}}
        <form method="POST" action="/select-server" style="margin-left: 1rem;">
            <select name="server_id" onchange="this.form.submit()" style="padding: 0.5rem; border-radius: 4px; border: 1px solid #ccc; background: white; color: #333;">
                <option value="">Select Server</option>
                {{range .Servers}}
                <option value="{{.ServerId}}" {{if and $.SelectedServer (eq $.SelectedServer.ServerId .ServerId)}}selected{{end}}>
                    {{.Name}}{{if .IsDefault}} (default){{end}}
                </option>
                {{end}}
            </select>
        </form>
        {{end}}
    </div>
</nav>

<main>
    <div class="container">
        {{.Content}}
    </div>
</main>

<div id="toast"></div>
