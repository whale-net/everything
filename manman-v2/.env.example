# ManManV2 Local Development Configuration
# Copy this file to .env and customize as needed

# ===========================
# Control Plane Services
# ===========================

# Enable/disable services (default: true)
ENABLE_MANMANV2_API=true
ENABLE_MANMANV2_PROCESSOR=true

# Build test game server image (default: true)
BUILD_TEST_GAME_SERVER=true

# ===========================
# Infrastructure
# ===========================

# PostgreSQL Configuration
# Options: 'default' (Tilt-managed) or 'custom' (external)
BUILD_POSTGRES_ENV=default

# If BUILD_POSTGRES_ENV=custom, set this:
# POSTGRES_URL=postgresql://user:password@host:port/database

# RabbitMQ Configuration
# Options: 'default' (Tilt-managed) or 'custom' (external)
BUILD_RABBITMQ_ENV=default

# If BUILD_RABBITMQ_ENV=custom, set these:
# RABBITMQ_HOST=localhost
# RABBITMQ_PORT=5672
# RABBITMQ_USER=rabbit
# RABBITMQ_PASSWORD=password

# ===========================
# S3/Object Storage
# ===========================

# S3 endpoint for logs and backups
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET=manmanv2-dev

# For AWS S3:
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_ACCESS_KEY=your-access-key
# S3_SECRET_KEY=your-secret-key
# S3_BUCKET=your-bucket-name

# ===========================
# Host Manager Configuration
# (Used when running host on bare metal)
# ===========================

# API server address for self-registration
API_ADDRESS=localhost:50051

# Server Name (OPTIONAL)
# If not provided, auto-generates: hostname-environment (or hostname-uuid if no environment)
# Recommended: Leave empty and use ENVIRONMENT instead for stable naming
# SERVER_NAME=my-custom-server-name

# Environment (OPTIONAL but RECOMMENDED)
# Used to group servers and ensure stable naming across restarts
# Examples: dev, staging, production, test
# Multiple managers on same host: Set different environments (e.g., dev vs prod)
ENVIRONMENT=dev

# RabbitMQ connection URL (must include vhost)
# Format: amqp://[user]:[password]@[host]:[port]/[vhost]
RABBITMQ_URL=amqp://rabbit:password@localhost:5672/manmanv2-dev

# Docker socket path (usually don't need to change)
DOCKER_SOCKET=/var/run/docker.sock

# NOTE: The wrapper sidecar has been retired. Host manages game containers directly.

# ===========================
# Management UI Configuration
# (If running ManMan v1 alongside v2)
# ===========================

# Auth mode: 'none', 'oidc'
MANAGEMENT_UI_AUTH_MODE=none

# OIDC Configuration (if MANAGEMENT_UI_AUTH_MODE=oidc)
# OIDC_ISSUER=https://your-oidc-provider.com
# OIDC_CLIENT_ID=your-client-id
# OIDC_CLIENT_SECRET=your-client-secret
# OIDC_REDIRECT_URI=http://management-ui.manman.local:30080/auth/callback
# SECRET_KEY=change-this-in-production

# ===========================
# Development Options
# ===========================

# Event processor configuration
STALE_HOST_THRESHOLD_SECONDS=10
EXTERNAL_EXCHANGE=external
LOG_LEVEL=debug
