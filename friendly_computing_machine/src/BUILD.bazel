load("@rules_python//python:defs.bzl", "py_binary", "py_library")
package(default_visibility = ["//friendly_computing_machine:__pkg__"])

# ==============================================================================
# Combined library (aggregates all modules)
# ==============================================================================

py_library(
    name = "fcm_lib",
    visibility = [
        "//friendly_computing_machine:__pkg__",
        "//friendly_computing_machine/tests:__pkg__",
    ],
    deps = [
        "//friendly_computing_machine/src/friendly_computing_machine:util",
        "//friendly_computing_machine/src/friendly_computing_machine/models",
        "//friendly_computing_machine/src/friendly_computing_machine/db",
        "//friendly_computing_machine/src/friendly_computing_machine/manman",
        "//friendly_computing_machine/src/friendly_computing_machine/rabbitmq",
        "//friendly_computing_machine/src/friendly_computing_machine/temporal",
        "//friendly_computing_machine/src/friendly_computing_machine/gemini",
        "//friendly_computing_machine/src/friendly_computing_machine/bot",
        "//friendly_computing_machine/src/friendly_computing_machine/cli",
        "//friendly_computing_machine/src/migrations",
    ],
)

# ==============================================================================
# Binary
# ==============================================================================

py_binary(
    name = "fcm_cli",
    srcs = ["//friendly_computing_machine/src/friendly_computing_machine:main"],
    main = "__main__.py",
    deps = [":fcm_lib"],
    visibility = ["//visibility:public"],
)
