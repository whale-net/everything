# Common Bazel options
build --symlink_prefix=bazel-
build --incompatible_strict_action_env
build --python_version=PY3
build:fast --jobs=auto

# Remote cache configuration (optional)
# Uses try-import to conditionally load remote cache config if available
try-import %workspace%/.bazelrc.remote

# Performance: Merge analysis and execution phases to reduce overhead
build --experimental_merged_skyframe_analysis_execution

# CI optimizations  
# Note: Cache paths are managed by bazel-contrib/setup-bazel action
# and should not be overridden here to avoid conflicts
build:ci --noshow_progress
build:ci --jobs=auto
build:ci --verbose_failures
build:ci --show_timestamps
build:ci --announce_rc
# Remote caching optimizations for CI
build:ci --guard_against_concurrent_changes
build:ci --experimental_remote_merkle_tree_cache
build:ci --remote_timeout=60
build:ci --remote_cache_compression
# Download all outputs from remote cache for better cache effectiveness
build:ci --remote_download_outputs=all
# Build metadata optimizations  
build:ci --nolegacy_external_runfiles
# Memory and CPU optimizations
build:ci --tool_java_runtime_version=remotejdk_11
build:ci --java_runtime_version=remotejdk_11
test:ci --cache_test_results=yes
test:ci --test_timeout_filters=-eternal

# Test configurations
test --test_output=errors
test --cache_test_results=yes
test:ci --test_output=errors
# OpenAPI Client Generation Java Runtime
build --java_runtime_version=remotejdk_17
