# Common Bazel options
build --symlink_prefix=bazel-
build --incompatible_strict_action_env
build --python_version=PY3
build:fast --jobs=auto

# Performance optimizations for target processing
# Increase analysis parallelism and loading performance
build --loading_phase_threads=auto
build --jobs=auto
build --experimental_parallel_aquery_output=true

# CI optimizations  
# Note: Cache paths are managed by bazel-contrib/setup-bazel action
# and should not be overridden here to avoid conflicts
build:ci --noshow_progress
build:ci --jobs=auto
build:ci --remote_download_minimal
build:ci --verbose_failures
build:ci --show_timestamps
build:ci --announce_rc
# Bandwidth-optimized caching for CI
build:ci --guard_against_concurrent_changes
test:ci --cache_test_results=yes

# Remote cache configuration (optional)
# Uses try-import to conditionally load remote cache config if available
try-import %workspace%/.bazelrc.remote

# Optional remote execution configuration
# Uncomment and configure to enable remote execution for significant performance improvements
# Example: BuildBuddy (free tier available)
# build --remote_executor=grpcs://remote.buildbuddy.io
# build --remote_header=x-buildbuddy-api-key=YOUR_API_KEY
# build --remote_instance_name=buildbuddy-io/buildbuddy/default_instance_name

# Test configurations
test --test_output=errors
test --cache_test_results=yes
test:ci --test_output=errors
