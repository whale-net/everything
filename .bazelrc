# Common Bazel options
build --symlink_prefix=bazel-
build --incompatible_strict_action_env
build --python_version=PY3
build:fast --jobs=auto

# CI optimizations  
# Note: Cache paths are managed by bazel-contrib/setup-bazel action
# and should not be overridden here to avoid conflicts
build:ci --noshow_progress
build:ci --jobs=auto
build:ci --remote_download_minimal
build:ci --verbose_failures
build:ci --show_timestamps
build:ci --announce_rc
# Bandwidth-optimized caching for CI
build:ci --guard_against_concurrent_changes
test:ci --cache_test_results=yes

# Remote cache configuration (optional)
# Uses try-import to conditionally load remote cache config if available
try-import %workspace%/.bazelrc.remote

# Remote cache concurrency optimizations
# Increase from defaults: remote_max_connections=100, http_max_parallel_downloads=8
build --remote_max_connections=300
build --http_max_parallel_downloads=24

# CI-specific remote cache optimizations
build:ci --remote_timeout=90s
build:ci --experimental_remote_cache_compression_threshold=50

# Test configurations
test --test_output=errors
test --cache_test_results=yes
test:ci --test_output=errors
